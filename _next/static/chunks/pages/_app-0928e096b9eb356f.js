(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{6840:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(5816)}])},3991:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{PrefetchKind:function(){return n},ACTION_REFRESH:function(){return o},ACTION_NAVIGATE:function(){return a},ACTION_RESTORE:function(){return s},ACTION_SERVER_PATCH:function(){return i},ACTION_PREFETCH:function(){return l},ACTION_FAST_REFRESH:function(){return u}});let o="refresh",a="navigate",s="restore",i="server-patch",l="prefetch",u="fast-refresh";(r=n||(n={})).AUTO="auto",r.FULL="full",r.TEMPORARY="temporary",("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1516:function(e,t){"use strict";function n(e,t,n,r){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return b}});let r=n(8754),o=r._(n(7294)),a=n(4532),s=n(3353),i=n(1410),l=n(9064),u=n(370),c=n(9955),f=n(4224),d=n(508),p=n(1516),h=n(4266),v=n(3991),g=new Set;function y(e,t,n,r,o,a){if(!a&&!(0,s.isLocalURL)(t))return;if(!r.bypassPrefetchedCheck){let o=void 0!==r.locale?r.locale:"locale"in e?e.locale:void 0,a=t+"%"+n+"%"+o;if(g.has(a))return;g.add(a)}let i=a?e.prefetch(t,o):e.prefetch(t,n,r);Promise.resolve(i).catch(e=>{})}function m(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}let _=o.default.forwardRef(function(e,t){let n,r;let{href:i,as:g,children:_,prefetch:b=null,passHref:w,replace:E,shallow:I,scroll:j,locale:k,onClick:S,onMouseEnter:x,onTouchStart:C,legacyBehavior:O=!1,...P}=e;n=_,O&&("string"==typeof n||"number"==typeof n)&&(n=o.default.createElement("a",null,n));let L=!1!==b,D=null===b?v.PrefetchKind.AUTO:v.PrefetchKind.FULL,M=o.default.useContext(c.RouterContext),R=o.default.useContext(f.AppRouterContext),N=null!=M?M:R,T=!M,{href:B,as:H}=o.default.useMemo(()=>{if(!M){let e=m(i);return{href:e,as:g?m(g):e}}let[e,t]=(0,a.resolveHref)(M,i,!0);return{href:e,as:g?(0,a.resolveHref)(M,g):t||e}},[M,i,g]),A=o.default.useRef(B),U=o.default.useRef(H);O&&(r=o.default.Children.only(n));let F=O?r&&"object"==typeof r&&r.ref:t,[K,V,W]=(0,d.useIntersection)({rootMargin:"200px"}),X=o.default.useCallback(e=>{(U.current!==H||A.current!==B)&&(W(),U.current=H,A.current=B),K(e),F&&("function"==typeof F?F(e):"object"==typeof F&&(F.current=e))},[H,F,B,W,K]);o.default.useEffect(()=>{N&&V&&L&&y(N,B,H,{locale:k},{kind:D},T)},[H,B,V,k,L,null==M?void 0:M.locale,N,T,D]);let q={ref:X,onClick(e){O||"function"!=typeof S||S(e),O&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e),N&&!e.defaultPrevented&&function(e,t,n,r,a,i,l,u,c,f){let{nodeName:d}=e.currentTarget,p="A"===d.toUpperCase();if(p&&(function(e){let t=e.currentTarget,n=t.getAttribute("target");return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!c&&!(0,s.isLocalURL)(n)))return;e.preventDefault();let h=()=>{"beforePopState"in t?t[a?"replace":"push"](n,r,{shallow:i,locale:u,scroll:l}):t[a?"replace":"push"](r||n,{forceOptimisticNavigation:!f})};c?o.default.startTransition(h):h()}(e,N,B,H,E,I,j,k,T,L)},onMouseEnter(e){O||"function"!=typeof x||x(e),O&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),N&&(L||!T)&&y(N,B,H,{locale:k,priority:!0,bypassPrefetchedCheck:!0},{kind:D},T)},onTouchStart(e){O||"function"!=typeof C||C(e),O&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),N&&(L||!T)&&y(N,B,H,{locale:k,priority:!0,bypassPrefetchedCheck:!0},{kind:D},T)}};if((0,l.isAbsoluteUrl)(H))q.href=H;else if(!O||w||"a"===r.type&&!("href"in r.props)){let e=void 0!==k?k:null==M?void 0:M.locale,t=(null==M?void 0:M.isLocaleDomain)&&(0,p.getDomainLocale)(H,e,null==M?void 0:M.locales,null==M?void 0:M.domainLocales);q.href=t||(0,h.addBasePath)((0,u.addLocale)(H,e,null==M?void 0:M.defaultLocale))}return O?o.default.cloneElement(r,q):o.default.createElement("a",{...P,...q},n)}),b=_;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return l}});let r=n(7294),o=n(29),a="function"==typeof IntersectionObserver,s=new Map,i=[];function l(e){let{rootRef:t,rootMargin:n,disabled:l}=e,u=l||!a,[c,f]=(0,r.useState)(!1),d=(0,r.useRef)(null),p=(0,r.useCallback)(e=>{d.current=e},[]);(0,r.useEffect)(()=>{if(a){if(u||c)return;let e=d.current;if(e&&e.tagName){let r=function(e,t,n){let{id:r,observer:o,elements:a}=function(e){let t;let n={root:e.root||null,margin:e.rootMargin||""},r=i.find(e=>e.root===n.root&&e.margin===n.margin);if(r&&(t=s.get(r)))return t;let o=new Map,a=new IntersectionObserver(e=>{e.forEach(e=>{let t=o.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)})},e);return t={id:n,observer:a,elements:o},i.push(n),s.set(n,t),t}(n);return a.set(e,t),o.observe(e),function(){if(a.delete(e),o.unobserve(e),0===a.size){o.disconnect(),s.delete(r);let e=i.findIndex(e=>e.root===r.root&&e.margin===r.margin);e>-1&&i.splice(e,1)}}}(e,e=>e&&f(e),{root:null==t?void 0:t.current,rootMargin:n});return r}}else if(!c){let e=(0,o.requestIdleCallback)(()=>f(!0));return()=>(0,o.cancelIdleCallback)(e)}},[u,n,t,c,d.current]);let h=(0,r.useCallback)(()=>{f(!1)},[]);return[p,c,h]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6324:function(e,t,n){"use strict";n.d(t,{I:function(){return s},g:function(){return a}});var r=n(7294),o=n(6063);class a{deleteItem(e){this.worker.postMessage(new o.Xo(o.aC.ItemDelete,e))}editItem(e){this.worker.postMessage(new o.Xo(o.aC.ItemEdit,e))}newItem(e){this.worker.postMessage(new o.Xo(o.aC.ItemNew,e))}constructor(e){this.worker=e}}let s=(0,r.createContext)({state:{items:[]}})},6063:function(e,t,n){"use strict";var r,o;n.d(t,{Xo:function(){return s},aC:function(){return r},kP:function(){return l},o9:function(){return i}}),(o=r||(r={})).ItemNew="item:new",o.ItemDelete="item:delete",o.ItemEdit="item:edit",o.DecisionNew="decision:new",o.DecisionDelete="decision:delete",o.DecisionEdit="decision:edit",o.StateFetch="state:fetch",o.StateReload="state:reload";class a{constructor(e){[this.category,this.action]=e.split(":",2),this.type=e}}class s extends a{constructor(e,t){super(e),this.data=t}}class i extends a{constructor(e,t){super(e),this.data=t}}class l extends a{constructor(e,t=null){super(e),this.data=t}}},5816:function(e,t,n){"use strict";let r,o;n.r(t),n.d(t,{default:function(){return H}});var a,s=n(5893);n(7952);var i=n(9008),l=n.n(i),u=n(7294),c=n(6324),f=n(1664),d=n.n(f),p=n(3583),h=n.n(p);function v(e){let{children:t}=e;return(0,s.jsx)("main",{className:h().pageBody,children:t})}function g(){return(0,s.jsxs)("div",{className:h().pageHeader,children:[(0,s.jsxs)("div",{className:h().pageHeaderLeft,children:[(0,s.jsx)(d(),{href:"/",children:"Items"}),(0,s.jsx)(d(),{href:"/decisions",children:"Decisions"})]}),(0,s.jsx)("div",{className:h().pageHeaderRight,children:"Menu"})]})}function y(){return(0,s.jsx)("div",{className:h().pageFooter})}var m=n(6063);class _{get level(){return this._level}incLevel(){this._level++}decLevel(){if(this._level<=0)throw Error("Should not be decrementing the level less than 0");this._level--}get shouldSave(){return this._shouldSave}set shouldSave(e){this._shouldSave=e}constructor(){this._shouldSave=!1,this._level=0}}let b=(e,t)=>t.some(t=>e instanceof t),w=new WeakMap,E=new WeakMap,I=new WeakMap,j=new WeakMap,k=new WeakMap,S={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return E.get(e);if("objectStoreNames"===t)return e.objectStoreNames||I.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return x(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function x(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{t(x(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&w.set(t,e)}).catch(()=>{}),k.set(t,e),t}(e);if(j.has(e))return j.get(e);let n="function"==typeof(t=e)?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(C(this),e),x(w.get(this))}:function(...e){return x(t.apply(C(this),e))}:function(e,...n){let r=t.call(C(this),e,...n);return I.set(r,e.sort?e.sort():[e]),x(r)}:(t instanceof IDBTransaction&&function(e){if(E.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});E.set(e,t)}(t),b(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,S):t;return n!==e&&(j.set(e,n),k.set(n,e)),n}let C=e=>k.get(e);function O(e,t,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){let s=indexedDB.open(e,t),i=x(s);return r&&s.addEventListener("upgradeneeded",e=>{r(x(s.result),e.oldVersion,e.newVersion,x(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),i.then(e=>{a&&e.addEventListener("close",()=>a()),o&&e.addEventListener("versionchange",e=>o(e.oldVersion,e.newVersion,e))}).catch(()=>{}),i}let P=["get","getKey","getAll","getAllKeys","count"],L=["put","add","delete","clear"],D=new Map;function M(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(D.get(t))return D.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,o=L.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||P.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,o?"readwrite":"readonly"),s=a.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),o&&a.done]))[0]};return D.set(t,a),a}S={...a=S,get:(e,t,n)=>M(e,t)||a.get(e,t,n),has:(e,t)=>!!M(e,t)||a.has(e,t)};let R=null;async function N(){let e=await O("knock-it-out",1,{upgrade(e){e.createObjectStore("states")}}),t=await e.get("states","main"),n={items:(null==t?void 0:t.items)||[]};return n}var T={get:async function(){return null===R&&(R=await N()),R},getSync:function(){if(null===R)throw Error("State isn't set yet for sync get!");return R},save:async function(){null==R&&(R=await N());let e=await O("knock-it-out",1);await e.put("states",R,"main")}};class B{log(e){console.log((this.canSave?"WORKER":"UI")+": "+e)}process(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t||new _;switch(n.incLevel(),this.log("processing event: ".concat(e.category,":").concat(e.action)),e.category){case"item":if(!this.handlers.itemHandler)return;this.handlers.itemHandler(e,n);break;case"state":if(!this.handlers.stateHandler)return;this.handlers.stateHandler(e,n);break;case"decision":if(!this.handlers.decisionHandler)return;this.handlers.decisionHandler(e,n);break;default:throw Error("Unsupported event category ".concat(e.category))}n.decLevel(),0==n.level&&this.canSave&&n.shouldSave&&T.save().then(()=>{T.get().then(e=>{self.postMessage(new m.kP(m.aC.StateReload,e))})})}processRaw(e){switch(this.log("processing raw event: "+JSON.stringify(e)),e.category){case"item":let t=new m.Xo(e.type,e.data);this.process(t);break;case"decision":let n=new m.o9(e.type,e.data);this.process(n);break;case"state":let r=new m.kP(e.type,e.data);this.process(r);break;default:throw Error("Unsupported raw event category ".concat(e.category))}}constructor(e,t=!0){this.handlers=e,this.canSave=t}}function H(e){let{Component:t,pageProps:r}=e,[o,a]=(0,u.useState)({items:[]}),[i,f]=(0,u.useState)();(0,u.useEffect)(()=>{let e=new Worker(n.tu(new URL(n.p+n.u(677),n.b)));e.onmessage=e=>{!function(e,t){let n=new B({stateHandler:(e,n)=>("reload"==e.action&&null!==e.data&&t({...e.data}),[])},!1);n.processRaw(e.data)}(e,a)},e.postMessage(new m.kP(m.aC.StateFetch)),f(e)},[]);let d=i?new c.g(i):void 0;return(0,s.jsxs)(c.I.Provider,{value:{state:o,stateMutator:d},children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,s.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com"})]}),(0,s.jsx)(g,{}),(0,s.jsx)(v,{children:(0,s.jsx)(t,{...r})}),(0,s.jsx)(y,{})]})}},7952:function(){},3583:function(e){e.exports={pageBody:"layout_pageBody___f3bi",pageHeader:"layout_pageHeader__XGsHR",pageHeaderLeft:"layout_pageHeaderLeft__YdDrf",pageHeaderRight:"layout_pageHeaderRight__Wsmcf",pageFooter:"layout_pageFooter__5EEEU"}},9008:function(e,t,n){e.exports=n(2636)},1664:function(e,t,n){e.exports=n(5569)}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(6840),t(6885)}),_N_E=e.O()}]);